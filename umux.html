<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>UMUX & Auto-Suggest Studie</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    background: linear-gradient(135deg, #e8efff, #f7faff);
    font-family: Inter, sans-serif;
}

/* PAGE WRAPPER */
.section {
    max-width: 900px;
    margin: 50px auto;
    background: white;
    padding: 45px 65px;
    border-radius: 26px;
    box-shadow: 0 18px 45px rgba(0,0,0,0.12);
    display: none;
    animation: fadeIn 0.5s ease;
}

.visible { display: block; }

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* LOGO */
.logo {
    width: 420px;
    display: block;
    margin: 0 auto 25px auto;
}

/* HEADERS */
h1 {
    color: #3558ff;
    font-size: 34px;
    font-weight: 800;
    text-align: center;
}
h2 {
    color: #3558ff;
    margin-top: 35px;
    margin-bottom: 10px;
}

/* BEAUTIFUL SEPARATOR */
.separator {
    height: 2px;
    background: linear-gradient(90deg, #3558ff, #99b3ff, transparent);
    margin: 25px 0;
}

/* BUTTON */
.button {
    width: 100%;
    padding: 18px;
    font-size: 22px;
    border-radius: 14px;
    border: none;
    background: linear-gradient(90deg, #4c6fff, #3558ff);
    color: white;
    cursor: pointer;
    margin-top: 30px;
    transition: 0.3s ease;
}
.button:hover {
    transform: scale(1.03);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}
.button:disabled { opacity: 0.45; cursor: not-allowed; }

/* SLIDERS */
.slider {
    width: 100%;
    height: 10px;
    border-radius: 30px;
    background: linear-gradient(to right, #f6a623 var(--p), #ddd var(--p));
    -webkit-appearance: none;
    margin-top: 10px;
}
.slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    height: 26px;
    width: 26px;
    border-radius: 50%;
    background: #f6a623;
    border: 3px solid white;
    box-shadow: 0 0 6px rgba(0,0,0,0.25);
}

/* SCALE NUMBERS */
.ticks { display:flex; justify-content:space-between; font-size:14px; margin-top:4px; }
.scale { display:flex; justify-content:space-between; font-size:14px; margin-bottom:12px; }

/* TEXTAREA */
textarea {
    width: 100%;
    height: 120px;
    margin-top: 6px;
    border-radius: 12px;
    border: 1px solid #bbb;
    padding: 12px;
    font-size: 15px;
    box-shadow: inset 0 2px 6px rgba(0,0,0,0.05);
}

/* POPUP */
.overlay {
    position: fixed;
    left:0; top:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.45);
    display:none;
    z-index:900;
}
.popup {
    position: fixed;
    top:50%; left:50%;
    transform: translate(-50%, -50%);
    background:white;
    padding:35px;
    border-radius:25px;
    width:450px;
    text-align:center;
    display:none;
    z-index:1000;
    box-shadow:0 15px 45px rgba(0,0,0,0.25);
    animation: popIn 0.35s ease;
}
@keyframes popIn {
    from { transform: translate(-50%, -50%) scale(0.85); opacity:0; }
    to { transform: translate(-50%, -50%) scale(1); opacity:1; }
}
.popup h2 { color:#3558ff; font-size:26px; }

/* PROGRESS BAR */
.progress {
    font-weight:700;
    margin-bottom:25px;
    color:#3558ff;
    font-size: 18px;
    background: #e3e9ff;
    padding: 10px 15px;
    border-radius: 12px;
    display:inline-block;
}
</style>

</head>
<body>

<!-- POPUP -->
<div class="overlay" id="overlay"></div>
<div class="popup" id="popup">
    <h2>âœ“ Vielen Dank!</h2>
    <p>Ihre Antworten wurden gespeichert.</p>
    <p style="color:#3558ff;">Weiterleitungâ€¦</p>
</div>

<!-- PAGE 1 -->
<div class="section visible" id="page1">

    <div class="progress">Seite 1 von 3</div>

    <div style="
        background: linear-gradient(135deg, #dfe8ff, #eef3ff);
        padding: 40px;
        border-radius: 22px;
        text-align: center;
        box-shadow: 0 12px 28px rgba(0,0,0,0.12);
        margin-bottom: 35px;
    ">
        <img src="/static/logo.png" class="logo">

        <h1 style="font-size: 40px; font-weight: 800; color: #1a47ff;">
            Studie zu SuchvorschlÃ¤gen â€“ Auto-Suggest
        </h1>

        <p style="font-size: 20px; color:#444;">
            Hallo und herzlich willkommen! ðŸ˜Š
        </p>

        <p style="font-size: 17px; color:#555; max-width:700px; margin: 0 auto;">
            Vielen Dank, dass Sie an meiner Studie teilnehmen.<br>
            Diese kurze Umfrage bewertet Ihre Erfahrung mit der Suchfunktion.
        </p>

        <div style="height:20px;"></div>

        <div style="
            background: white;
            border-left: 6px solid #4a68ff;
            padding: 18px 22px;
            border-radius: 14px;
            max-width:680px;
            margin:auto;
            box-shadow: 0 6px 16px rgba(0,0,0,0.10);
        ">
            <b style="font-size: 17px; color:#1a47ff;">Was ist Auto-Suggest?</b><br>
            Kontextbasierte VorschlÃ¤ge, die thematisch oder semantisch zur aktuellen Eingabe passen.
        </div>
    </div>

    <h2>Beispiel einer Auto-Suggest-Suche</h2>

    <div style="text-align:center;">
        <img src="/static/ottobeispiel.gif"
             style="width:88%; max-width:700px; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,0.15);">
    </div>

    <button class="button" onclick="goPage(2)">Weiter â†’</button>

</div>

<!-- PAGE 2 -->
<div class="section" id="page2">
    <div class="progress">Seite 2 von 3</div>

    <h1>UMUX â€“ Nutzerbewertung</h1>

    <div class="qblock">
        <p><b>1. Ich wÃ¼rde dieses System gerne hÃ¤ufig verwenden.</b></p>
        <input type="range" min="1" max="7" value="4" class="slider" id="q1">
        <div class="ticks"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span></div>
        <div class="scale"><span>Stimme nicht zu</span><span>Neutral</span><span>Stimme voll zu</span></div>
    </div>

    <div class="qblock">
        <p><b>2. Ich finde das System unnÃ¶tig komplex.</b></p>
        <input type="range" min="1" max="7" value="4" class="slider" id="q2">
        <div class="ticks"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span></div>
        <div class="scale"><span>Stimme nicht zu</span><span>Neutral</span><span>Stimme voll zu</span></div>
    </div>

    <div class="qblock">
        <p><b>3. Ich fand das System einfach zu bedienen.</b></p>
        <input type="range" min="1" max="7" value="4" class="slider" id="q3">
        <div class="ticks"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span></div>
        <div class="scale"><span>Stimme nicht zu</span><span>Neutral</span><span>Stimme voll zu</span></div>
    </div>

    <div class="qblock">
        <p><b>4. Ich denke, ich brÃ¤uchte UnterstÃ¼tzung einer fachkundigen Person.</b></p>
        <input type="range" min="1" max="7" value="4" class="slider" id="q4">
        <div class="ticks"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span></div>
        <div class="scale"><span>Stimme nicht zu</span><span>Neutral</span><span>Stimme voll zu</span></div>
    </div>

    <div class="separator"></div>

    <h2>Ihre Erfahrung</h2>

    <p>Was hat Ihnen an dieser Suchfunktion gut gefallen?</p>
    <textarea id="t1"></textarea>

    <p>Was hat Ihnen nicht gut gefallen?</p>
    <textarea id="t2"></textarea>

    <p><b>Wie zufrieden waren Sie insgesamt?</b></p>
    <input type="range" min="1" max="7" value="4" class="slider" id="sat">
    <div class="ticks"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span></div>

    <button class="button" id="sendBtn" onclick="submitForm()">Absenden â†’</button>
</div>

<!-- PAGE 3 -->
<div class="section" id="page3">
    <div class="progress">Seite 3 von 3</div>

    <h1>Vielen Dank! ðŸŽ‰</h1>
    <p style="font-size:20px; text-align:center;">
        Ihre Teilnahme wurde erfolgreich abgeschlossen.<br><br>
        Sie kÃ¶nnen dieses Fenster jetzt schlieÃŸen.
    </p>
</div>

<script>
function deviceType(){
    return /Android|iPhone|iPad/i.test(navigator.userAgent) ? "Mobile" : "Desktop";
}

function goPage(n){
    document.querySelectorAll(".section").forEach(sec => sec.classList.remove("visible"));
    document.getElementById("page" + n).classList.add("visible");
}

/* COLOR UPDATE FOR SLIDERS */
document.querySelectorAll(".slider").forEach(sl => {
    const update = () => sl.style.setProperty("--p", ((sl.value-1)/6*100) + "%");
    update();
    sl.addEventListener("input", update);
});

function submitForm(){
    document.getElementById("sendBtn").disabled = true;

    let payload = {
        q1: Number(document.getElementById("q1").value),
        q2: Number(document.getElementById("q2").value),
        q3: Number(document.getElementById("q3").value),
        q4: Number(document.getElementById("q4").value),

        good: document.getElementById("t1").value,
        bad: document.getElementById("t2").value,
        satisfaction: Number(document.getElementById("sat").value),

        device: deviceType()
    };
    fetch("/save_umux", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
    })
    .then(res => res.json())
    .then(data => {
        document.getElementById("overlay").style.display = "block";
        document.getElementById("popup").style.display = "block";

        setTimeout(() => {
            goPage(3);
            document.getElementById("overlay").style.display = "none";
            document.getElementById("popup").style.display = "none";
        }, 2500);
    })
    .catch(err => {
        alert("Fehler: " + err);
        document.getElementById("sendBtn").disabled = false;
    });
}
</script>

</body>
</html>


